<kendo-dialog
  [width]="400"
  [height]="520"
  (close)="closeForm()"
  class="form-dialog"
>
  <kendo-dialog-titlebar>{{
    isNew ? "Új jogosultság" : "Jogosultság módosítása"
  }}</kendo-dialog-titlebar>
  <form [formGroup]="form" (ngSubmit)="onSave()">
    <kendo-formfield>
      <kendo-textbox hidden formControlName="id"></kendo-textbox>
    </kendo-formfield>
    <kendo-formfield>
      <kendo-label
        [for]="module"
        text="Modul"
        class="label-input-md"
      ></kendo-label>
      <kendo-combobox
        #module
        size="small"
        fillMode="solid"
        formControlName="module"
        [data]="modules"
        textField="name"
        valueField="id"
        [kendoDropDownFilter]="{ operator: 'contains' }"
        (valueChange)="moduleChange($event)"
      >
      </kendo-combobox>
      <kendo-formerror>Kötelező mező</kendo-formerror>
    </kendo-formfield>
    <kendo-formfield>
      <kendo-label
        [for]="submodule"
        text="Almodul"
        class="label-input-md"
      ></kendo-label>
      <kendo-combobox
        #submodule
        size="small"
        fillMode="solid"
        formControlName="subModule"
        [data]="subModules"
        textField="name"
        valueField="id"
        [kendoDropDownFilter]="{ operator: 'contains' }"
        (valueChange)="subModuleChange($event)"
      >
      </kendo-combobox>
      <kendo-formerror>Kötelező mező</kendo-formerror>
    </kendo-formfield>
    <kendo-formfield>
      <kendo-label
        [for]="operation"
        text="Tranzakció"
        class="label-input-md"
      ></kendo-label>
      <kendo-combobox
        #operation
        size="small"
        fillMode="solid"
        formControlName="operation"
        [data]="operations"
        textField="name"
        valueField="id"
        [kendoDropDownFilter]="{ operator: 'contains' }"
        (valueChange)="operationChange($event)"
      >
      </kendo-combobox>
      <kendo-formerror>Kötelező mező</kendo-formerror>
    </kendo-formfield>
    <kendo-formfield>
      <kendo-label
        [for]="action"
        text="Elemi művelet"
        class="label-input-md"
      ></kendo-label>
      <kendo-combobox
        #action
        size="small"
        fillMode="solid"
        formControlName="action"
        [data]="actions"
        textField="name"
        valueField="id"
        [kendoDropDownFilter]="{ operator: 'contains' }"
        (valueChange)="actionChange($event)"
      >
      </kendo-combobox>
      <kendo-formerror>Kötelező mező</kendo-formerror>
    </kendo-formfield>
    <kendo-formfield>
      <kendo-label
        [for]="name"
        text="Jogosultság megnevezése"
        class="label-input-md"
      ></kendo-label>
      <kendo-textbox
        size="small"
        fillMode="solid"
        [readonly]="true"
        formControlName="name"
        #name
      >
      </kendo-textbox>
      <kendo-formerror>Kötelező mező</kendo-formerror>
    </kendo-formfield>
    <button type="submit" hidden></button>
  </form>
  <kendo-dialog-actions>
    <button
      type="button"
      kendoButton
      themeColor="secondary"
      fillMode="solid"
      size="medium"
      (click)="onCancel()"
      [disabled]="(isBusy | async)!"
    >
      Mégsem
    </button>
    <button
      type="submit"
      themeColor="primary"
      fillMode="solid"
      size="medium"
      kendoButton
      (click)="onSave()"
      class="loader-button"
      [disabled]="(isBusy | async)!"
    >
      <loading-button
        [showIndicator]="(isBusy | async)!"
        [buttonText]="'Mentés'"
      ></loading-button>
    </button>
  </kendo-dialog-actions>
</kendo-dialog>
